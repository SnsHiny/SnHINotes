<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>

    <!--
        - 监视属性：
            - 当被监视的属性变化时，回调函数handler自动调用
            - 监视的属性必须存在才能进行监视
            - 两种写法：watch配置和$watch监视
        - 深度监视：
            - Vue中的watch默认不检测对象内部值的改变
            - 配置deep:true可以检测对象内部值的改变
    -->

    <div id="root">
        <h1>今天天气很{{info}},{{a}}</h1>
        <button @click="changeWeather">点我切换天气</button>
        <button @click="a++">点我增加数字</button>
        <!-- 方法名的位置可以写一些简单的语句 -->
        <!-- <button @click="isHot = !isHot">点我切换天气</button> -->
    </div>
         
    <script type="text/javascript">
        Vue.config.productionTip = false
             
        const vm = new Vue({
            el: '#root',
            data: {
                isHot: true,
                a: 1,
                numbers: {
                    b: 1,
                    c: 2
                } 
            },
            methods: {
                changeWeather() {
                    this.isHot = !this.isHot
                }
            },
            computed: {
                info() {
                    return this.isHot ? "炎热": "凉爽"
                }
            },
            //监视方法一
            watch: {
                isHot: {
                    // immediate: true：初始化时调用handler
                    // immediate: true,
                    handler(newValue, oldValue) {
                        console.log("isHot被修改了", newValue, oldValue);
                    }
                },
                info: {
                    handler(newValue, oldValue) {
                        console.log("info被修改了", newValue, oldValue);
                    }
                },
                // 深度监视
                numbers: {
                    //开启深度监视，可以监视多级结构中的所有属性变化
                    deep: true,
                    handler(newValue, oldValue) {
                        console.log("numbers被修改了", newValue, oldValue);
                    }
                }
                //简写(当只需要handler方法时)
                // numbers(newValue, oldValue) {
                //     console.log("numbers被修改了", newValue, oldValue);
                // }
            }
        })
        // 监视方法二
        // vm.$watch("isHot", {
        //     handler(newValue, oldValue) {
        //         console.log("isHot被修改了", newValue, oldValue);
        //     }
        // })
        // 监视方法二（简写）
        // vm.$watch("isHot", function(newValue, oldValue) {
        //     console.log("numbers被修改了", newValue, oldValue);
        // })
    </script>
</body>
</html>