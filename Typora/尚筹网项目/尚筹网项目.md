# 尚筹网

### 项目架构图

- parent：打包方式为pom
	- 继承：主要为了对jar包的统一管理
	- 聚合：把模块工程聚合到一起，构成一个整体，可以实现一键安装
- webui：打包方式为war，运行到tomcat上
- component：打包方式为jar，放各个组件
- entity：打包方式为jar，放各个实体类

![](C:\Users\67090\Desktop\Typora\尚筹网项目\项目架构图.png)

### 基于Maven的Mybatis逆向工程

#### pom.xml配置

```xml
<dependencies>
    <dependency>
      <groupId>org.mybatis</groupId>
      <artifactId>mybatis</artifactId>
      <version>3.4.5</version>
    </dependency>
  </dependencies>

  <!-- 控制maven在构建过程中相关配置 -->
  <build>
      <!-- plugins要与pluginManagement同级 -->
      <pluginManagement>

      </pluginManagement>
      <!-- 构建过程中用到的插件 -->
      <plugins>
          <!-- 具体插件，mybatis-geneator是一款mybatis自动代码生成工具，可以通过配置，快速生成mapper和xml文件 -->
          <plugin>
              <groupId>org.mybatis.generator</groupId>
              <artifactId>mybatis-generator-maven-plugin</artifactId>
              <version>1.3.0</version>
              <!-- 插件的依赖 -->
              <dependencies>
                  <!-- 逆向工程的核心依赖 -->
                  <dependency>
                      <groupId>org.mybatis.generator</groupId>
                      <artifactId>mybatis-generator-core</artifactId>
                      <version>1.3.7</version>
                  </dependency>

                  <dependency>
                      <groupId>mysql</groupId>
                      <artifactId>mysql-connector-java</artifactId>
                      <version>8.0.16</version>
                  </dependency>

                  <dependency>
                      <groupId>c3p0</groupId>
                      <artifactId>c3p0</artifactId>
                      <version>0.9.1.2</version>
                  </dependency>
              </dependencies>
          </plugin>
      </plugins>
</build>
```

#### generatorConfig.xml配置

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE generatorConfiguration
        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">
<generatorConfiguration>
    <!--加载数据库连接资源文件-->
    <properties resource="JDBCConfig.properties"></properties>
    <context id="testTables" targetRuntime="MyBatis3">
        <!--是否去除自动生成的注释 true是；false 否-->
        <commentGenerator>
            <property name="suppressAllComments" value="true"/>
        </commentGenerator>

        <!--配置数据库连接-->
        <jdbcConnection driverClass="${jdbc.Driver}" connectionURL="${jdbc.url}" userId="${jdbc.username}" password="${jdbc.password}"></jdbcConnection>
        <!-- 默认false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer，为 true时把JDBC DECIMAL和NUMERIC类型解析为java.math.BigDecimal -->
        <javaTypeResolver>
            <property name="forceBigDecimals" value="false"/>
        </javaTypeResolver>

        <!--生成entity的位置-->
        <javaModelGenerator targetPackage="com.SnHI.crowd.entity" targetProject="./src/main/java">
            <!--enableSubPackages,是否让schema作为包的后缀-->
            <property name="enableSubPackages" value="false"/>
            <!--从数据库返回的值被清除前后空格-->
            <property name="trimStrings" value="true"/>
        </javaModelGenerator>

        <!--mapper映射文件生成的位置-->
        <sqlMapGenerator targetPackage="com.SnHI.crowd.mapper" targetProject="./src/main/resources">
            <property name="enableSubPackages" value="false"></property>
        </sqlMapGenerator>

        <!--mapper接口生成的位置-->
        <javaClientGenerator type="XMLMAPPER" targetPackage="com.SnHI.crowd.mapper" targetProject="./src/main/java">
            <property name="enableSubPackages" value="false"/>
        </javaClientGenerator>

        <!--指定数据库表的生成策略，要和数据库中进行对应，否则将会出错-->
        <table tableName="t_admin"  domainObjectName="Admin"></table>
    </context>
</generatorConfiguration>
```

#### 执行逆向生成操作的Maven命令

```
mybatis-generator:generate
```

